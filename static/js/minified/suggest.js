$(document).ready(function(){var e,t,n,a={},r={},d=$("p.date"),o=$("p.selected"),s=new Date,c=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(e,t){if(e>t){for(i=t+1;i<=e-1;i++)$($(".date")[i]).addClass("middle");$($(".date")[e]).addClass("less"),$($(".date")[t]).addClass("more")}else{for(i=e+1;i<=t-1;i++)$($(".date")[i]).addClass("middle");$($(".date")[t]).addClass("less"),$($(".date")[e]).addClass("more")}}function l(e,t){var n=new Date(t,e,0);return[n.getDate(),n.getDay()]}function h(o,s){var h=$(".numbers"),m=l(o+1,s)[0],y=0;for(n=l(o,s)[1],d.text(c[o]+" "+s).data("date",(o+","+s).toString()),t=Number(d.data("date").split(",")[0]),e=Number(d.data("date").split(",")[1]),i=0;i<n;i++)$($(".hidden")[0]).clone().detach().prependTo(h);for(i=0;i<m;i++)$($(".hidden")[0]).clone().detach().removeClass("hidden").appendTo(h);$(".numbers li.date").each(function(e){var t=$(this);t.hasClass("hidden")||y<m&&(y+=1,$(t.find("p")).text(y))}),a.month===t&&a.year===e?(a.month>r.month?a.year<r.year?u(a.index,99):u(0,a.index):a.month<r.month&&(a.year>r.year?u(0,a.index):u(a.index,99)),$($(".date")[a.index]).addClass("active")):r.month===t&&r.year===e&&(a.month>r.month?a.year<r.year?u(0,r.index):u(r.index,99):a.month<r.month&&(a.year>r.year?u(r.index,99):u(0,r.index)),$($(".date")[r.index]).addClass("active"))}function m(e){e&&$(".numbers").empty(),date=1,$(".date").each(function(){$(this).removeClass("active middle more less")})}h(s.getMonth(),s.getFullYear()),$(".numbers").on("click",".date",function(i){$("#calendar").css("border","1px solid #DEE0E4"),i.preventDefault();var d=$(this);function s(a){d.addClass("active"),a.index=d.index()+1,a.date=d.index()+1-n,a.month=t,a.year=e}a.hasOwnProperty("index")&&r.hasOwnProperty("index")||!a.hasOwnProperty("index")?(a={},r={},m(!1),s(a),o.text(a.date+" "+c[a.month])):a.hasOwnProperty("index")&&(s(r),r.month>a.month&&r.year===a.year?(u(0,r.index),o.text(a.date+" "+c[a.month].substring(0,3)+" - "+r.date+" "+c[r.month].substring(0,3)+" "+r.year)):r.year>a.year?(u(0,r.index),o.text(a.date+" "+c[a.month].substring(0,3)+" "+a.year+" - "+r.date+" "+c[r.month].substring(0,3)+", "+e)):r.month<a.month&&r.year===a.year?(u(r.index,99),o.text(r.date+" "+c[r.month].substring(0,3)+" - "+a.date+" "+c[a.month].substring(0,3)+" "+a.year)):r.year<a.year?(u(r.index,99),o.text(r.date+" "+c[r.month].substring(0,3)+" "+r.year+" - "+a.date+" "+c[a.month].substring(0,3)+", "+a.year)):a.index>r.index&&r.year===a.year?(u(r.index,a.index),o.text(r.date+" - "+a.date+" "+c[r.month].substring(0,3)+" "+r.year)):(o.text(a.date+" - "+r.date+" "+c[a.month]+", "+e),u(a.index,r.index)))}),$("input").each(function(){$(this).on("click",function(){$(this).css("border","1px solid #DEE0E4")})}),$("#country").on("click",function(){$(this).css("border","1px solid #DEE0E4")}),$(".controls .left").on("click",function(){m(!0),0===t?h(11,e-1):h(t-1,e)}),$(".controls .right").on("click",function(){m(!0),11===t?h(0,e+1):h(t+1,e)});var y,p=$(".fileinput");$(".file").on("click",function(){p.click()}),p.on("change",function(){y=p.val().split(/\\|\//).pop(),$(".fileinfo").text(y)}),$(".rectangle").on("click",function(){var e=$($("input")[0]).val(),t=$($("input")[1]).val(),n=$("#country p").text().split("â–¾")[0],i=$($("input")[2]).val(),d=$("textarea").val(),s=$(".fileinput")[0].files[0],c=[],u=o.text();if(function(){function t(e){e.css("border","1px solid #e05f5fbd")}if(""===e&&c.push("name"),""===i&&c.push("city"),"Select a country..."===n&&c.push("country"),a.hasOwnProperty("index")||c.push("date"),r.hasOwnProperty("index")||(r=a),0===c.length)return!0;for(item in c)"name"===c[item]?t($($("input")[0])):"city"===c[item]?t($($("input")[2])):"country"===c[item]?t($("#country")):"date"===c[item]&&t($("#calendar"));return window.scrollTo(0,0),!1}()){var l=new FormData,h={title:e,text_date:u,start_date:a,end_date:r,country:n,city:i,description:d,website:t,image:y};l.append("data",JSON.stringify(h)),l.append("file",s),$.ajax({type:"POST",url:"/submit",contentType:!1,data:l,processData:!1,success:function(e){"OK"===e&&(document.location.href="/thanks")},error:function(e){console.log("some error",e)}})}})});
